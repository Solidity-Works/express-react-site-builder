{"ast":null,"code":"import _objectSpread from \"D:\\\\Dapp\\\\Clients\\\\site-builder\\\\grapesJs\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nexport default (function (editor, config) {\n  var pfx = editor.getConfig('stylePrefix');\n  var modal = editor.Modal;\n  var codeViewer = editor.CodeManager.getViewer('CodeMirror').clone();\n  var container = document.createElement('div');\n  var importLabel = config.modalImportLabel;\n  var importCnt = config.modalImportContent;\n  var viewerEditor = codeViewer.editor;\n\n  // Init import button\n  var btnImp = document.createElement('button');\n  btnImp.type = 'button';\n  btnImp.innerHTML = config.modalImportButton;\n  btnImp.className = \"\".concat(pfx, \"btn-prim \").concat(pfx, \"btn-import\");\n  btnImp.onclick = function (e) {\n    editor.setComponents(viewerEditor.getValue().trim());\n    modal.close();\n  };\n\n  // Init code viewer\n  codeViewer.set(_objectSpread(_objectSpread({}, {\n    codeName: 'htmlmixed',\n    theme: 'hopscotch',\n    readOnly: 0\n  }), config.importViewerOptions));\n  return {\n    run: function run(editor) {\n      var _this = this;\n      if (!viewerEditor) {\n        var txtarea = document.createElement('textarea');\n        if (importLabel) {\n          var labelEl = document.createElement('div');\n          labelEl.className = \"\".concat(pfx, \"import-label\");\n          labelEl.innerHTML = importLabel;\n          container.appendChild(labelEl);\n        }\n        container.appendChild(txtarea);\n        container.appendChild(btnImp);\n        codeViewer.init(txtarea);\n        viewerEditor = codeViewer.editor;\n      }\n      modal.setTitle(config.modalImportTitle);\n      modal.setContent(container);\n      var cnt = typeof importCnt == 'function' ? importCnt(editor) : importCnt;\n      codeViewer.setContent(cnt || '');\n      modal.open().getModel().once('change:open', function () {\n        return editor.stopCommand(_this.id);\n      });\n      viewerEditor.refresh();\n    },\n    stop: function stop() {\n      modal.close();\n    }\n  };\n});","map":{"version":3,"names":["editor","config","pfx","getConfig","modal","Modal","codeViewer","CodeManager","getViewer","clone","container","document","createElement","importLabel","modalImportLabel","importCnt","modalImportContent","viewerEditor","btnImp","type","innerHTML","modalImportButton","className","concat","onclick","e","setComponents","getValue","trim","close","set","_objectSpread","codeName","theme","readOnly","importViewerOptions","run","_this","txtarea","labelEl","appendChild","init","setTitle","modalImportTitle","setContent","cnt","open","getModel","once","stopCommand","id","refresh","stop"],"sources":["D:/Dapp/Clients/site-builder/grapesJs/node_modules/grapesjs-preset-webpage/src/commands/openImport.js"],"sourcesContent":["export default (editor, config) => {\n  const pfx = editor.getConfig('stylePrefix');\n  const modal = editor.Modal;\n  const codeViewer = editor.CodeManager.getViewer('CodeMirror').clone();\n  const container = document.createElement('div');\n  const importLabel = config.modalImportLabel;\n  const importCnt = config.modalImportContent;\n  let viewerEditor = codeViewer.editor;\n\n  // Init import button\n  const btnImp = document.createElement('button');\n  btnImp.type = 'button';\n  btnImp.innerHTML = config.modalImportButton;\n  btnImp.className = `${pfx}btn-prim ${pfx}btn-import`;\n  btnImp.onclick = e => {\n    editor.setComponents(viewerEditor.getValue().trim());\n    modal.close();\n  };\n\n  // Init code viewer\n  codeViewer.set({ ...{\n    codeName: 'htmlmixed',\n    theme: 'hopscotch',\n    readOnly: 0\n  }, ...config.importViewerOptions});\n\n  return {\n    run(editor) {\n      if (!viewerEditor) {\n        const txtarea = document.createElement('textarea');\n\n        if (importLabel) {\n          const labelEl = document.createElement('div');\n          labelEl.className = `${pfx}import-label`;\n          labelEl.innerHTML = importLabel;\n          container.appendChild(labelEl);\n        }\n\n        container.appendChild(txtarea);\n        container.appendChild(btnImp);\n        codeViewer.init(txtarea);\n        viewerEditor = codeViewer.editor;\n      }\n\n      modal.setTitle(config.modalImportTitle);\n      modal.setContent(container);\n      const cnt = typeof importCnt == 'function' ? importCnt(editor) : importCnt;\n      codeViewer.setContent(cnt || '');\n      modal.open().getModel()\n      .once('change:open', () => editor.stopCommand(this.id));\n      viewerEditor.refresh();\n    },\n\n    stop() {\n      modal.close();\n    }\n  }\n}\n"],"mappings":";AAAA,gBAAe,UAACA,MAAM,EAAEC,MAAM,EAAK;EACjC,IAAMC,GAAG,GAAGF,MAAM,CAACG,SAAS,CAAC,aAAa,CAAC;EAC3C,IAAMC,KAAK,GAAGJ,MAAM,CAACK,KAAK;EAC1B,IAAMC,UAAU,GAAGN,MAAM,CAACO,WAAW,CAACC,SAAS,CAAC,YAAY,CAAC,CAACC,KAAK,CAAC,CAAC;EACrE,IAAMC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EAC/C,IAAMC,WAAW,GAAGZ,MAAM,CAACa,gBAAgB;EAC3C,IAAMC,SAAS,GAAGd,MAAM,CAACe,kBAAkB;EAC3C,IAAIC,YAAY,GAAGX,UAAU,CAACN,MAAM;;EAEpC;EACA,IAAMkB,MAAM,GAAGP,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAC/CM,MAAM,CAACC,IAAI,GAAG,QAAQ;EACtBD,MAAM,CAACE,SAAS,GAAGnB,MAAM,CAACoB,iBAAiB;EAC3CH,MAAM,CAACI,SAAS,MAAAC,MAAA,CAAMrB,GAAG,eAAAqB,MAAA,CAAYrB,GAAG,eAAY;EACpDgB,MAAM,CAACM,OAAO,GAAG,UAAAC,CAAC,EAAI;IACpBzB,MAAM,CAAC0B,aAAa,CAACT,YAAY,CAACU,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;IACpDxB,KAAK,CAACyB,KAAK,CAAC,CAAC;EACf,CAAC;;EAED;EACAvB,UAAU,CAACwB,GAAG,CAAAC,aAAA,CAAAA,aAAA,KAAM;IAClBC,QAAQ,EAAE,WAAW;IACrBC,KAAK,EAAE,WAAW;IAClBC,QAAQ,EAAE;EACZ,CAAC,GAAKjC,MAAM,CAACkC,mBAAmB,CAAC,CAAC;EAElC,OAAO;IACLC,GAAG,WAAAA,IAACpC,MAAM,EAAE;MAAA,IAAAqC,KAAA;MACV,IAAI,CAACpB,YAAY,EAAE;QACjB,IAAMqB,OAAO,GAAG3B,QAAQ,CAACC,aAAa,CAAC,UAAU,CAAC;QAElD,IAAIC,WAAW,EAAE;UACf,IAAM0B,OAAO,GAAG5B,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;UAC7C2B,OAAO,CAACjB,SAAS,MAAAC,MAAA,CAAMrB,GAAG,iBAAc;UACxCqC,OAAO,CAACnB,SAAS,GAAGP,WAAW;UAC/BH,SAAS,CAAC8B,WAAW,CAACD,OAAO,CAAC;QAChC;QAEA7B,SAAS,CAAC8B,WAAW,CAACF,OAAO,CAAC;QAC9B5B,SAAS,CAAC8B,WAAW,CAACtB,MAAM,CAAC;QAC7BZ,UAAU,CAACmC,IAAI,CAACH,OAAO,CAAC;QACxBrB,YAAY,GAAGX,UAAU,CAACN,MAAM;MAClC;MAEAI,KAAK,CAACsC,QAAQ,CAACzC,MAAM,CAAC0C,gBAAgB,CAAC;MACvCvC,KAAK,CAACwC,UAAU,CAAClC,SAAS,CAAC;MAC3B,IAAMmC,GAAG,GAAG,OAAO9B,SAAS,IAAI,UAAU,GAAGA,SAAS,CAACf,MAAM,CAAC,GAAGe,SAAS;MAC1ET,UAAU,CAACsC,UAAU,CAACC,GAAG,IAAI,EAAE,CAAC;MAChCzC,KAAK,CAAC0C,IAAI,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CACtBC,IAAI,CAAC,aAAa,EAAE;QAAA,OAAMhD,MAAM,CAACiD,WAAW,CAACZ,KAAI,CAACa,EAAE,CAAC;MAAA,EAAC;MACvDjC,YAAY,CAACkC,OAAO,CAAC,CAAC;IACxB,CAAC;IAEDC,IAAI,WAAAA,KAAA,EAAG;MACLhD,KAAK,CAACyB,KAAK,CAAC,CAAC;IACf;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module"}