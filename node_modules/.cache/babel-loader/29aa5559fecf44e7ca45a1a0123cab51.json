{"ast":null,"code":"import grapesjs from'grapesjs';import loadComponents from'./components';import loadBlocks from'./blocks';import loadCommands from'./commands';import loadPanels from'./panels';import parserHtmlCaseSensitive from'./ParserHtmlCaseSensitive';import{ChartPluginRef}from'./consts';export default function addChartPlugin(){grapesjs.plugins.add(ChartPluginRef,function(editor){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};editor.TraitManager.addType('pre',{noLabel:true,getInputEl:function getInputEl(){var model=this.model;var _model$props=model.props(),text=_model$props.text;var label=text;var input=\"<div type=\\\"text\\\" style=\\\"font-size: 1rem; line-height:30px; margin:10px; word-wrap: break-word; width: 180px;\\\">\".concat(label,\"</div>\");return input;}});var c=opts;var defaults={blocks:[ChartPluginRef],blockLabel:'Charts',blockCategory:'Extra',defaultStyle:true};console.log(defaults);for(var name in defaults){if(!(name in c))c[name]=defaults[name];}loadComponents(editor,c);loadBlocks(editor,c);loadCommands(editor,c);loadPanels(editor,c);var em=editor.getModel();var emConf=em.get('Config');emConf.textTags=['br','b','i','u','a','ul','ol'];em.get('Parser').parserHtml=parserHtmlCaseSensitive(emConf);em.get('Parser').parseHtml=function(str){var pHtml=em.get('Parser').parserHtml;pHtml.compTypes=em.get('DomComponents').getTypes();var res=pHtml.parse(str,em.get('Parser').parserCss);return res;};editor.on(\"load\",function(){var openBl=editor.Panels.getButton('views','open-blocks');openBl&&openBl.set('active',1);});});}","map":{"version":3,"names":["grapesjs","loadComponents","loadBlocks","loadCommands","loadPanels","parserHtmlCaseSensitive","ChartPluginRef","addChartPlugin","plugins","add","editor","opts","arguments","length","undefined","TraitManager","addType","noLabel","getInputEl","model","_model$props","props","text","label","input","concat","c","defaults","blocks","blockLabel","blockCategory","defaultStyle","console","log","name","em","getModel","emConf","get","textTags","parserHtml","parseHtml","str","pHtml","compTypes","getTypes","res","parse","parserCss","on","openBl","Panels","getButton","set"],"sources":["D:/Dapp/Clients/site-builder/grapesJs/src/Chart/index.js"],"sourcesContent":["import grapesjs from 'grapesjs';\r\nimport loadComponents from './components'; \r\nimport loadBlocks from './blocks';\r\nimport loadCommands from './commands';\r\nimport loadPanels from './panels';\r\nimport parserHtmlCaseSensitive from './ParserHtmlCaseSensitive';\r\n\r\nimport {\r\n    ChartPluginRef\r\n} from './consts';\r\n\r\nexport default function addChartPlugin() {\r\n    grapesjs.plugins.add(ChartPluginRef, (editor, opts = {}) => {\r\n\r\n        \r\n        editor.TraitManager.addType('pre', {\r\n                                                                \r\n            noLabel: true,\r\n            \r\n            getInputEl() {\r\n                const { model} = this;\r\n                const {text} = model.props();\r\n                const label = text;\r\n                const input = `<div type=\"text\" style=\"font-size: 1rem; line-height:30px; margin:10px; word-wrap: break-word; width: 180px;\">${label}</div>`;\r\n                return input;\r\n            }\r\n        }\r\n                                                            \r\n\t\t) \r\n\r\n\r\n\r\n        let c = opts;\r\n \r\n        let defaults = {\r\n            blocks: [ChartPluginRef],\r\n\r\n            blockLabel: 'Charts',\r\n\r\n            blockCategory: 'Extra',\r\n\r\n            defaultStyle: true,\r\n\r\n        };\r\n        console.log(defaults)\r\n\r\n        for (let name in defaults) {\r\n            if (!(name in c))\r\n                c[name] = defaults[name];\r\n        }\r\n\r\n        loadComponents(editor, c);\r\n\r\n        loadBlocks(editor, c);\r\n\r\n        loadCommands(editor, c);\r\n\r\n        loadPanels(editor, c); \r\n\r\n        const em = editor.getModel();\r\n        const emConf = em.get('Config');\r\n        emConf.textTags = ['br', 'b', 'i', 'u', 'a', 'ul', 'ol'];\r\n        em.get('Parser').parserHtml = parserHtmlCaseSensitive(emConf);\r\n        em.get('Parser').parseHtml = (str) => {\r\n            const pHtml = em.get('Parser').parserHtml;\r\n            pHtml.compTypes = em.get('DomComponents').getTypes();\r\n            let res = pHtml.parse(str, em.get('Parser').parserCss);\r\n            return res;\r\n        };\r\n\r\n        editor.on(\"load\", () => {\r\n            const openBl = editor.Panels.getButton('views', 'open-blocks');\r\n            openBl && openBl.set('active', 1);\r\n        });\r\n\r\n    });\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}