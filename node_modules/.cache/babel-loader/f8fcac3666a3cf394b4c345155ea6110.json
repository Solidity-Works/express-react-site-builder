{"ast":null,"code":"export default ((editor, config) => {\n  const pfx = editor.getConfig('stylePrefix');\n  const modal = editor.Modal;\n  const codeViewer = editor.CodeManager.getViewer('CodeMirror').clone();\n  const container = document.createElement('div');\n  const importLabel = config.modalImportLabel;\n  const importCnt = config.modalImportContent;\n  let viewerEditor = codeViewer.editor;\n\n  // Init import button\n  const btnImp = document.createElement('button');\n  btnImp.type = 'button';\n  btnImp.innerHTML = config.modalImportButton;\n  btnImp.className = `${pfx}btn-prim ${pfx}btn-import`;\n  btnImp.onclick = e => {\n    editor.setComponents(viewerEditor.getValue().trim());\n    modal.close();\n  };\n\n  // Init code viewer\n  codeViewer.set({\n    ...{\n      codeName: 'htmlmixed',\n      theme: 'hopscotch',\n      readOnly: 0\n    },\n    ...config.importViewerOptions\n  });\n  return {\n    run(editor) {\n      if (!viewerEditor) {\n        const txtarea = document.createElement('textarea');\n        if (importLabel) {\n          const labelEl = document.createElement('div');\n          labelEl.className = `${pfx}import-label`;\n          labelEl.innerHTML = importLabel;\n          container.appendChild(labelEl);\n        }\n        container.appendChild(txtarea);\n        container.appendChild(btnImp);\n        codeViewer.init(txtarea);\n        viewerEditor = codeViewer.editor;\n      }\n      modal.setTitle(config.modalImportTitle);\n      modal.setContent(container);\n      const cnt = typeof importCnt == 'function' ? importCnt(editor) : importCnt;\n      codeViewer.setContent(cnt || '');\n      modal.open().getModel().once('change:open', () => editor.stopCommand(this.id));\n      viewerEditor.refresh();\n    },\n    stop() {\n      modal.close();\n    }\n  };\n});","map":{"version":3,"names":["editor","config","pfx","getConfig","modal","Modal","codeViewer","CodeManager","getViewer","clone","container","document","createElement","importLabel","modalImportLabel","importCnt","modalImportContent","viewerEditor","btnImp","type","innerHTML","modalImportButton","className","onclick","e","setComponents","getValue","trim","close","set","codeName","theme","readOnly","importViewerOptions","run","txtarea","labelEl","appendChild","init","setTitle","modalImportTitle","setContent","cnt","open","getModel","once","stopCommand","id","refresh","stop"],"sources":["D:/CMK/2023_5/WebsiteBuiderTask/modify/grapesJs/node_modules/grapesjs-preset-webpage/src/commands/openImport.js"],"sourcesContent":["export default (editor, config) => {\n  const pfx = editor.getConfig('stylePrefix');\n  const modal = editor.Modal;\n  const codeViewer = editor.CodeManager.getViewer('CodeMirror').clone();\n  const container = document.createElement('div');\n  const importLabel = config.modalImportLabel;\n  const importCnt = config.modalImportContent;\n  let viewerEditor = codeViewer.editor;\n\n  // Init import button\n  const btnImp = document.createElement('button');\n  btnImp.type = 'button';\n  btnImp.innerHTML = config.modalImportButton;\n  btnImp.className = `${pfx}btn-prim ${pfx}btn-import`;\n  btnImp.onclick = e => {\n    editor.setComponents(viewerEditor.getValue().trim());\n    modal.close();\n  };\n\n  // Init code viewer\n  codeViewer.set({ ...{\n    codeName: 'htmlmixed',\n    theme: 'hopscotch',\n    readOnly: 0\n  }, ...config.importViewerOptions});\n\n  return {\n    run(editor) {\n      if (!viewerEditor) {\n        const txtarea = document.createElement('textarea');\n\n        if (importLabel) {\n          const labelEl = document.createElement('div');\n          labelEl.className = `${pfx}import-label`;\n          labelEl.innerHTML = importLabel;\n          container.appendChild(labelEl);\n        }\n\n        container.appendChild(txtarea);\n        container.appendChild(btnImp);\n        codeViewer.init(txtarea);\n        viewerEditor = codeViewer.editor;\n      }\n\n      modal.setTitle(config.modalImportTitle);\n      modal.setContent(container);\n      const cnt = typeof importCnt == 'function' ? importCnt(editor) : importCnt;\n      codeViewer.setContent(cnt || '');\n      modal.open().getModel()\n      .once('change:open', () => editor.stopCommand(this.id));\n      viewerEditor.refresh();\n    },\n\n    stop() {\n      modal.close();\n    }\n  }\n}\n"],"mappings":"AAAA,gBAAe,CAACA,MAAM,EAAEC,MAAM,KAAK;EACjC,MAAMC,GAAG,GAAGF,MAAM,CAACG,SAAS,CAAC,aAAa,CAAC;EAC3C,MAAMC,KAAK,GAAGJ,MAAM,CAACK,KAAK;EAC1B,MAAMC,UAAU,GAAGN,MAAM,CAACO,WAAW,CAACC,SAAS,CAAC,YAAY,CAAC,CAACC,KAAK,CAAC,CAAC;EACrE,MAAMC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EAC/C,MAAMC,WAAW,GAAGZ,MAAM,CAACa,gBAAgB;EAC3C,MAAMC,SAAS,GAAGd,MAAM,CAACe,kBAAkB;EAC3C,IAAIC,YAAY,GAAGX,UAAU,CAACN,MAAM;;EAEpC;EACA,MAAMkB,MAAM,GAAGP,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAC/CM,MAAM,CAACC,IAAI,GAAG,QAAQ;EACtBD,MAAM,CAACE,SAAS,GAAGnB,MAAM,CAACoB,iBAAiB;EAC3CH,MAAM,CAACI,SAAS,GAAI,GAAEpB,GAAI,YAAWA,GAAI,YAAW;EACpDgB,MAAM,CAACK,OAAO,GAAGC,CAAC,IAAI;IACpBxB,MAAM,CAACyB,aAAa,CAACR,YAAY,CAACS,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;IACpDvB,KAAK,CAACwB,KAAK,CAAC,CAAC;EACf,CAAC;;EAED;EACAtB,UAAU,CAACuB,GAAG,CAAC;IAAE,GAAG;MAClBC,QAAQ,EAAE,WAAW;MACrBC,KAAK,EAAE,WAAW;MAClBC,QAAQ,EAAE;IACZ,CAAC;IAAE,GAAG/B,MAAM,CAACgC;EAAmB,CAAC,CAAC;EAElC,OAAO;IACLC,GAAGA,CAAClC,MAAM,EAAE;MACV,IAAI,CAACiB,YAAY,EAAE;QACjB,MAAMkB,OAAO,GAAGxB,QAAQ,CAACC,aAAa,CAAC,UAAU,CAAC;QAElD,IAAIC,WAAW,EAAE;UACf,MAAMuB,OAAO,GAAGzB,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;UAC7CwB,OAAO,CAACd,SAAS,GAAI,GAAEpB,GAAI,cAAa;UACxCkC,OAAO,CAAChB,SAAS,GAAGP,WAAW;UAC/BH,SAAS,CAAC2B,WAAW,CAACD,OAAO,CAAC;QAChC;QAEA1B,SAAS,CAAC2B,WAAW,CAACF,OAAO,CAAC;QAC9BzB,SAAS,CAAC2B,WAAW,CAACnB,MAAM,CAAC;QAC7BZ,UAAU,CAACgC,IAAI,CAACH,OAAO,CAAC;QACxBlB,YAAY,GAAGX,UAAU,CAACN,MAAM;MAClC;MAEAI,KAAK,CAACmC,QAAQ,CAACtC,MAAM,CAACuC,gBAAgB,CAAC;MACvCpC,KAAK,CAACqC,UAAU,CAAC/B,SAAS,CAAC;MAC3B,MAAMgC,GAAG,GAAG,OAAO3B,SAAS,IAAI,UAAU,GAAGA,SAAS,CAACf,MAAM,CAAC,GAAGe,SAAS;MAC1ET,UAAU,CAACmC,UAAU,CAACC,GAAG,IAAI,EAAE,CAAC;MAChCtC,KAAK,CAACuC,IAAI,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CACtBC,IAAI,CAAC,aAAa,EAAE,MAAM7C,MAAM,CAAC8C,WAAW,CAAC,IAAI,CAACC,EAAE,CAAC,CAAC;MACvD9B,YAAY,CAAC+B,OAAO,CAAC,CAAC;IACxB,CAAC;IAEDC,IAAIA,CAAA,EAAG;MACL7C,KAAK,CAACwB,KAAK,CAAC,CAAC;IACf;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module"}